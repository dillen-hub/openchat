{"version":3,"file":"js/44.f1636a9d.js","mappings":"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","sources":["webpack://openchat/./src/views/AdminRoomView.vue?c9b0","webpack://openchat/src/views/AdminRoomView.vue","webpack://openchat/./src/views/AdminRoomView.vue?6140","webpack://openchat/./src/views/AdminRoomView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex flex-wrap w-full justify-center bg-sky-500 py-20\"},[(_vm.ready)?_c('div',{staticClass:\"text-white\"},[_vm._v(\" 載入中... \")]):(!_vm.access)?_c('div',{staticClass:\"text-white\"},[_vm._v(\" \"+_vm._s(_vm.status || \"存取遭拒\")+\" \")]):_c('div',[_c('div',{staticClass:\"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg\"},[_c('h2',{staticClass:\"text-gray-800 text-3xl font-semibold\"},[_vm._v(\"加入管理層社群\")]),_c('p',{staticClass:\"mt-2 text-gray-600\"},[_vm._v(\"你好，\"+_vm._s(_vm.profile.nickname)+\"，這裡是加入密碼：\")]),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.status),expression:\"status\"}],staticClass:\"mt-2 text-red-600\"},[_vm._v(_vm._s(_vm.status))]),_c('div',{staticClass:\"w-full mt-2 text-gray-600 flex rounded bg-white w-auto shadow-md\"},[_c('input',{staticClass:\"w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none\",attrs:{\"disabled\":!_vm.ready,\"type\":\"text\"},domProps:{\"value\":_vm.password}}),_c('button',{staticClass:\"m-2 rounded px-4 px-4 py-2 font-semibold\",attrs:{\"disabled\":!_vm.ready},on:{\"click\":_vm.copySecret}},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.ready),expression:\"!ready\"}],staticClass:\"animate-spin -ml-1 mr-3 h-5 w-5\",attrs:{\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('circle',{staticClass:\"opacity-25\",attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\",\"stroke\":\"currentColor\",\"stroke-width\":\"4\"}}),_c('path',{staticClass:\"opacity-75\",attrs:{\"d\":\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\",\"fill\":\"currentColor\"}})]),_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.ready),expression:\"ready\"}],staticClass:\"h-6 w-6\",attrs:{\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"viewBox\":\"0 0 24 24\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('path',{attrs:{\"d\":\"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}})])])]),_c('div',{staticClass:\"flex justify-end mt-4\"},[_c('a',{staticClass:\"flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\",attrs:{\"href\":_vm.url}},[_c('svg',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.ready),expression:\"!ready\"}],staticClass:\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\",attrs:{\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('circle',{staticClass:\"opacity-25\",attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\",\"stroke\":\"currentColor\",\"stroke-width\":\"4\"}}),_c('path',{staticClass:\"opacity-75\",attrs:{\"d\":\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\",\"fill\":\"currentColor\"}})]),_vm._v(\" 加入連結在這裡 \")])])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"flex flex-wrap w-full justify-center bg-sky-500 py-20\">\n    <div v-if=\"ready\" class=\"text-white\">\n      載入中...\n    </div>\n    <div v-else-if=\"!access\" class=\"text-white\">\n      {{ status || \"存取遭拒\" }}\n    </div>\n    <div v-else>\n      <div class=\"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg\">\n        <h2 class=\"text-gray-800 text-3xl font-semibold\">加入管理層社群</h2>\n        <p class=\"mt-2 text-gray-600\">你好，{{ profile.nickname }}，這裡是加入密碼：</p>\n        <p v-show=\"status\" class=\"mt-2 text-red-600\">{{ status }}</p>\n        <div class=\"w-full mt-2 text-gray-600 flex rounded bg-white w-auto shadow-md\">\n          <input :disabled=\"!ready\"\n                 :value=\"password\"\n                 class=\"w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none\"\n                 type=\"text\">\n          <button :disabled=\"!ready\" class=\"m-2 rounded px-4 px-4 py-2 font-semibold\" @click=\"copySecret\">\n            <svg v-show=\"!ready\" class=\"animate-spin -ml-1 mr-3 h-5 w-5\" fill=\"none\"\n                 viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n              <path class=\"opacity-75\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                    fill=\"currentColor\"></path>\n            </svg>\n            <svg v-show=\"ready\" class=\"h-6 w-6\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\n                 viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path\n                  d=\"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"flex justify-end mt-4\">\n          <a\n              :href=\"url\"\n              class=\"flex items-center justify-center bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full\"\n          >\n            <svg v-show=\"!ready\" class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" fill=\"none\"\n                 viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n              <path class=\"opacity-75\"\n                    d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n                    fill=\"currentColor\"></path>\n            </svg>\n            加入連結在這裡\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"AdminRoomView\",\n  data: () => ({\n    profile: null,\n    status: null,\n    ready: false,\n    access: false,\n    url: null,\n    password: null\n  }),\n  methods: {\n    copySecret() {\n      if (!navigator.clipboard) {\n        this.status = '您的瀏覽器不支援複製功能'\n        return\n      }\n      navigator.clipboard\n          .writeText(this.password)\n          .then(() => this.status = '已複製代碼')\n          .catch(() => this.status = '無法複製代碼')\n    },\n  },\n  async created() {\n    this.profile = await this.$profile();\n    if (!this.profile) {\n      const refer = `${process.env.VUE_APP_OPENCHAT_JOIN_HOST}/#/admin/room`;\n      const url = `${process.env.VUE_APP_SARA_INTE_HOST}/?refer=${encodeURIComponent(refer)}`;\n      location.assign(url);\n      return;\n    }\n    if (\n        Array.isArray(this.profile?.roles) &&\n        this.profile.roles.includes('openchat')\n    ) {\n      this.access = true;\n    } else {\n      console.log(\"forbidden\")\n      return;\n    }\n    try {\n      const xhr = await this.$axios.get('/admin-room');\n      this.url = xhr.data.url;\n      this.password = xhr.data.password;\n    } catch (error) {\n      if (!error?.response?.data?.code) {\n        this.status = '授權伺服器發生嚴重錯誤';\n      }\n    } finally {\n      this.ready = true;\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminRoomView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AdminRoomView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminRoomView.vue?vue&type=template&id=a6e57234&\"\nimport script from \"./AdminRoomView.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminRoomView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","access","_s","profile","nickname","directives","name","rawName","value","expression","status","attrs","ready","domProps","password","on","copySecret","url","staticRenderFns","data","methods","navigator","clipboard","writeText","then","catch","async","$profile","Array","xhr","$axios","get","error","response","code","console","log","refer","encodeURIComponent","location","assign","component"],"sourceRoot":""}