(self["webpackChunkopenchat"]=self["webpackChunkopenchat"]||[]).push([[342],{8342:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-wrap w-full justify-center bg-sky-500 py-20"},[t.ready?n("div",[n("div",{staticClass:"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg"},[n("h2",{staticClass:"text-gray-800 text-3xl font-semibold"},[t._v("檢查加入代碼")]),n("p",{staticClass:"mt-2 text-gray-600"},[t._v("請輸入申請人的加入代碼：")]),n("div",{staticClass:"w-full mt-2 text-gray-600 flex rounded bg-white w-auto shadow-md"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],staticClass:"w-full border-none bg-transparent px-4 py-1 text-gray-900 outline-none focus:outline-none",attrs:{type:"text",placeholder:"例如：000000"},domProps:{value:t.query},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)},input:function(e){e.target.composing||(t.query=e.target.value)}}}),n("button",{staticClass:"m-2 rounded px-4 px-4 py-2 font-semibold",on:{click:t.submit}},[n("svg",{staticClass:"mt-1 h-6 w-6",attrs:{fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z","stroke-linecap":"round","stroke-linejoin":"round"}})])])]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.notice,expression:"notice"}],staticClass:"mt-2 text-red-600"},[t._v(t._s(t.notice))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.application.code,expression:"application.code"}],staticClass:"max-w-md mx-3 my-5 py-4 px-8 bg-white shadow-lg rounded-lg"},[n("h2",{staticClass:"text-gray-800 text-3xl font-semibold"},[t._v(" 加入代碼："+t._s(t.application.code)+" ")]),n("p",{staticClass:"mt-2 text-gray-600"},[t._v(" 使用者代碼："+t._s(t.application.user_agent)),n("br"),t._v(" IP 位址："+t._s(t.application.ip_address)),n("br"),t._v(" 申請時間："+t._s(new Date(1e3*t.application.created_at))+" ")]),t.application.approval_by?n("p",{staticClass:"mt-2 text-amber-600"},[t._v(" 已由 "+t._s(t.application.approval_by)+" 於 "+t._s(new Date(t.application.approval_at))+" 許可 ")]):n("div",{staticClass:"flex justify-end mt-4"},[n("button",{staticClass:"flex items-center justify-center bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 mx-1 rounded-full",on:{click:t.approval}},[t._v(" 許可 ")]),n("button",{staticClass:"flex items-center justify-center bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 mx-1 rounded-full",on:{click:t.reject}},[t._v(" 否決 ")])])])]):n("div",[t._v(" 存取遭拒 ")])])},a=[];n(7941),n(2526),n(7327),n(1539),n(5003),n(4747),n(9337);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(2222);var c={name:"AdminJoinView",data:function(){return{ready:!1,query:null,notice:null,application:{}}},computed:{authOptions:function(){return{headers:{Authorization:localStorage.getItem("unified_token")}}}},methods:{submit:function(){var t=this,e=s(s({},this.authOptions),{},{params:{code:this.query}});this.$axios.get("application",e).then((function(e){t.application=e.data,t.notice=""})).catch((function(e){var n;t.application={},404===(null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.status)?t.notice="加入代碼不存在":t.notice="發生嚴重錯誤"}))},approval:function(){var t=this,e=s(s({},this.authOptions),{},{params:{code:this.application.code}});this.$axios.patch("application",null,e).then((function(){return t.application={}})).catch((function(t){return console.error(t)}))},reject:function(){var t=this,e=s(s({},this.authOptions),{},{params:{code:this.application.code}});this.$axios.delete("application",e).then((function(){return t.application={}})).catch((function(t){return console.error(t)}))}},created:function(){var t=this;this.$profile().then((function(e){null!==e&&void 0!==e&&e.roles?t.ready=!0:console.log("forbidden")})).catch((function(t){var e;if(401!==(null===t||void 0===t||null===(e=t.response)||void 0===e?void 0:e.status))console.log("forbidden");else{var n="".concat("https://web-tech-tw.eu.org/openchat-join","/#/admin/join"),o="".concat("https://web-tech-tw.github.io/sara.inte","/?refer=").concat(n);location.assign(o)}}))}},l=c,p=n(1001),u=(0,p.Z)(l,o,a,!1,null,null,null),d=u.exports},9337:function(t,e,n){var o=n(2109),a=n(9781),i=n(3887),r=n(5656),s=n(1236),c=n(6135);o({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(t){var e,n,o=r(t),a=s.f,l=i(o),p={},u=0;while(l.length>u)n=a(o,e=l[u++]),void 0!==n&&c(p,e,n);return p}})}}]);
//# sourceMappingURL=342-legacy.edfd16e5.js.map